{
  "type": "object",
  "required": [
    "notes"
  ],
  "properties": {
    "notes": {
      "type": "string",
      "description": "Notes",
      "order": "1"
    },
    "classes": {
      "type": "array",
      "listLabel": "Classes",
      "itemLabel": "Class",
      "columns": "2",
      "sectionLabel": "Class definitions",
      "order": "2",
      "items": {
        "type": "object",
        "required": [
          "name",
          "description",
          "attributes"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Class name"
          },
          "description": {
            "type": "string",
            "description": "Class description"
          },
          "examples": {
            "type": "array",
            "description": "Class few-shot examples",
            "listLabel": "Few-shot examples",
            "itemLabel": "Few-shot example",
            "items": {
              "type": "object",
              "required": [
                "name",
                "classPrompt",
                "attributesPrompt",
                "imagesPath"
              ],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Example name",
                  "order": "0"
                },
                "classPrompt": {
                  "type": "string",
                  "description": "Classification prompt as few-shot classification example for this class",
                  "order": "2"
                },
                "attributesPrompt": {
                  "type": "string",
                  "description": "Extraction prompt as few-shot attribute value extraction example for this class.",
                  "order": "3"
                },
                "imagePath": {
                  "type": "string",
                  "description": "Image(s) Path in the Configuration Bucket. Supports single files, or S3 prefixes for folders with multiple images. Optional but recommended for better visual understanding.",
                  "order": "4"
                }
              }
            }
          },
          "attributes": {
            "type": "array",
            "listLabel": "Attributes",
            "itemLabel": "Attribute",
            "items": {
              "type": "object",
              "columns": "2",
              "required": [
                "name",
                "description",
                "attributeType"
              ],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Attribute name",
                  "order": "0"
                },
                "description": {
                  "type": "string",
                  "description": "Attribute description",
                  "order": "1"
                },
                "attributeType": {
                  "type": "string",
                  "description": "Type of attribute",
                  "enum": ["simple", "group", "list"],
                  "order": "2"
                },
                "evaluation_method": {
                  "type": "string",
                  "description": "Evaluation Method",
                  "enum": [
                    "",
                    "LLM",
                    "SEMANTIC",
                    "FUZZY",
                    "NUMERIC_EXACT",
                    "EXACT"
                  ],
                  "order": "3",
                  "dependsOn": {
                    "field": "attributeType",
                    "value": "simple"
                  }
                },
                "evaluation_threshold": {
                  "type": "number",
                  "description": "Evaluation Threshold - used for SEMANTIC, and FUZZY methods",
                  "minimum": 0,
                  "maximum": 1,
                  "order": "5",
                  "dependsOn": {
                    "field": "evaluation_method",
                    "values": [
                      "SEMANTIC",
                      "FUZZY"
                    ]
                  }
                },
                "confidence_threshold": {
                  "type": "number",
                  "description": "Confidence threshold for this specific attribute (0.0 to 1.0). If not set, the default confidence threshold from assessment section will be used.",
                  "minimum": 0,
                  "maximum": 1,
                  "order": "6",
                  "dependsOn": {
                    "field": "attributeType",
                    "value": "simple"
                  }
                },
                "groupAttributes": {
                  "type": "array",
                  "listLabel": "Group Attributes",
                  "itemLabel": "Attribute",
                  "order": "7",
                  "dependsOn": {
                    "field": "attributeType",
                    "value": "group"
                  },
                  "items": {
                    "type": "object",
                    "required": [
                      "name",
                      "description"
                    ],
                    "properties": {
                      "name": {
                        "type": "string",
                        "description": "Attribute name",
                        "order": "0"
                      },
                      "description": {
                        "type": "string",
                        "description": "Attribute description",
                        "order": "1"
                      },
                      "evaluation_method": {
                        "type": "string",
                        "description": "Evaluation Method",
                        "enum": [
                          "",
                          "LLM",
                          "SEMANTIC",
                          "FUZZY",
                          "NUMERIC_EXACT",
                          "EXACT"
                        ],
                        "order": "2"
                      },
                      "evaluation_threshold": {
                        "type": "number",
                        "description": "Evaluation Threshold - used for SEMANTIC, and FUZZY methods",
                        "minimum": 0,
                        "maximum": 1,
                        "order": "4",
                        "dependsOn": {
                          "field": "evaluation_method",
                          "values": [
                            "SEMANTIC",
                            "FUZZY"
                          ]
                        }
                      },
                      "confidence_threshold": {
                        "type": "number",
                        "description": "Confidence threshold for this specific attribute (0.0 to 1.0). If not set, the default confidence threshold from assessment section will be used.",
                        "minimum": 0,
                        "maximum": 1,
                        "order": "5"
                      }
                    },
                    "columns": "2"
                  }
                },
                "listItemTemplate": {
                  "type": "object",
                  "sectionLabel": "List Item Template",
                  "order": "8",
                  "dependsOn": {
                    "field": "attributeType",
                    "value": "list"
                  },
                  "required": [
                    "itemAttributes"
                  ],
                  "properties": {
                    "itemDescription": {
                      "type": "string",
                      "description": "Description of each list item",
                      "order": "0"
                    },
                    "itemAttributes": {
                      "type": "array",
                      "listLabel": "Item Attributes",
                      "itemLabel": "Attribute",
                      "order": "1",
                      "items": {
                        "type": "object",
                        "required": [
                          "name",
                          "description"
                        ],
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Attribute name",
                            "order": "0"
                          },
                          "description": {
                            "type": "string",
                            "description": "Attribute description",
                            "order": "1"
                          },
                          "evaluation_method": {
                            "type": "string",
                            "description": "Evaluation Method",
                            "enum": [
                              "",
                              "LLM",
                              "SEMANTIC",
                              "FUZZY",
                              "NUMERIC_EXACT",
                              "EXACT"
                            ],
                            "order": "2"
                          },
                          "evaluation_threshold": {
                            "type": "number",
                            "description": "Evaluation Threshold - used for SEMANTIC, and FUZZY methods",
                            "minimum": 0,
                            "maximum": 1,
                            "order": "4",
                            "dependsOn": {
                              "field": "evaluation_method",
                              "values": [
                                "SEMANTIC",
                                "FUZZY"
                              ]
                            }
                          },
                          "confidence_threshold": {
                            "type": "number",
                            "description": "Confidence threshold for this specific attribute (0.0 to 1.0). If not set, the default confidence threshold from assessment section will be used.",
                            "minimum": 0,
                            "maximum": 1,
                            "order": "5"
                          }
                        },
                        "columns": "2"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "evaluation": {
      "type": "object",
      "sectionLabel": "Evaluation Inference",
      "order": "3",
      "properties": {
        "llm_method": {
          "type": "object",
          "properties": {
            "model": {
              "type": "string",
              "description": "Bedrock model ID",
              "enum": [
                "us.amazon.nova-lite-v1:0",
                "us.amazon.nova-pro-v1:0",
                "us.amazon.nova-premier-v1:0",
                "us.anthropic.claude-3-haiku-20240307-v1:0",
                "us.anthropic.claude-3-5-sonnet-20241022-v2:0",
                "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
                "us.anthropic.claude-sonnet-4-20250514-v1:0",
                "us.anthropic.claude-sonnet-4-20250514-v1:0:1m",
                "us.anthropic.claude-opus-4-20250514-v1:0",
                "us.anthropic.claude-opus-4-1-20250805-v1:0"
              ],
              "order": "1"
            },
            "temperature": {
              "type": "number",
              "description": "Sampling temperature",
              "order": "2"
            },
            "top_k": {
              "type": "number",
              "description": "Sampling Top K",
              "order": "3"
            },
            "top_p": {
              "type": "number",
              "description": "Sampling Top P",
              "order": "4"
            },
            "max_tokens": {
              "type": "number",
              "description": "Max tokens",
              "order": "5"
            },
            "system_prompt": {
              "type": "string",
              "format": "textarea",
              "description": "System prompt for LLM evaluation",
              "order": "6"
            },
            "task_prompt": {
              "type": "string",
              "format": "textarea",
              "description": "Task prompt for LLM evaluation - supports parameters {DOCUMENT_CLASS}, {ATTRIBUTE_NAME}, {ATTRIBUTE_DESCRIPTION}, {EXPECTED_VALUE} and {ACTUAL_VALUE}",
              "order": "7"
            }
          }
        }
      }
    },
    "assessment": {
      "type": "object",
      "sectionLabel": "Assessment & HITL Configuration",
      "order": "4",
      "properties": {
        "default_confidence_threshold": {
          "type": "number",
          "description": "HITL Confidence Threshold (0.0-1.0) - Documents with confidence below this threshold will be sent for Human In The Loop review",
          "minimum": 0.0,
          "maximum": 1.0,
          "order": "1"
        }
      }
    },
    "summarization": {
      "type": "object",
      "sectionLabel": "Summarization Inference",
      "order": "5",
      "properties": {
        "model": {
          "type": "string",
          "description": "Bedrock model ID",
          "enum": [
            "us.amazon.nova-lite-v1:0",
            "us.amazon.nova-pro-v1:0",
            "us.amazon.nova-premier-v1:0",
            "us.anthropic.claude-3-haiku-20240307-v1:0",
            "us.anthropic.claude-3-5-sonnet-20241022-v2:0",
            "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
            "us.anthropic.claude-sonnet-4-20250514-v1:0",
            "us.anthropic.claude-sonnet-4-20250514-v1:0:1m",
            "us.anthropic.claude-opus-4-20250514-v1:0",
            "us.anthropic.claude-opus-4-1-20250805-v1:0"
          ],
          "order": "1"
        },
        "temperature": {
          "type": "number",
          "description": "Sampling temperature",
          "order": "2"
        },
        "top_k": {
          "type": "number",
          "description": "Sampling Top K",
          "order": "3"
        },
        "top_p": {
          "type": "number",
          "description": "Sampling Top P",
          "order": "4"
        },
        "max_tokens": {
          "type": "number",
          "description": "Max tokens",
          "order": "5"
        },
        "system_prompt": {
          "type": "string",
          "format": "textarea",
          "description": "System prompt",
          "order": "6"
        },
        "task_prompt": {
          "type": "string",
          "format": "textarea",
          "description": "Task prompt - supports parameter {DOCUMENT_TEXT}. Optionally use <<CACHEPOINT>> to separate static and dynamic elements of prompt for Bedrock prompt caching.",
          "order": "7"
        }
      }
    },
    "discovery": {
      "order": "6",
      "type": "object",
      "sectionLabel": "Discovery Configuration",
      "description": "Configuration for document class discovery functionality",
      "properties": {
        "without_ground_truth": {
          "order": "0",
          "type": "object",
          "sectionLabel": "Discovery Without Ground Truth",
          "description": "Configuration for discovering document classes without reference data",
          "properties": {
            "model_id": {
              "type": "string",
              "description": "Bedrock model ID for discovery without ground truth",
              "enum": [
                "us.amazon.nova-lite-v1:0",
                "us.amazon.nova-pro-v1:0",
                "us.amazon.nova-premier-v1:0",
                "us.anthropic.claude-3-haiku-20240307-v1:0",
                "us.anthropic.claude-3-5-sonnet-20241022-v2:0",
                "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
                "us.anthropic.claude-sonnet-4-20250514-v1:0",
                "us.anthropic.claude-sonnet-4-20250514-v1:0:1m",
                "us.anthropic.claude-opus-4-20250514-v1:0",
                "us.anthropic.claude-opus-4-1-20250805-v1:0"
              ],
              "default": "us.amazon.nova-pro-v1:0",
              "order": "0"
            },
            "temperature": {
              "type": "number",
              "description": "Temperature parameter for model creativity (0.0-1.0)",
              "minimum": 0.0,
              "maximum": 1.0,
              "default": 1.0,
              "order": "1"
            },
            "top_p": {
              "type": "number",
              "description": "Top-p parameter for nucleus sampling (0.0-1.0)",
              "minimum": 0.0,
              "maximum": 1.0,
              "default": 0.1,
              "order": "2"
            },
            "max_tokens": {
              "type": "number",
              "description": "Maximum number of tokens to generate",
              "minimum": 1000,
              "maximum": 20000,
              "default": 10000,
              "order": "3"
            },
            "system_prompt": {
              "type": "string",
              "format": "textarea",
              "description": "System prompt for the discovery model",
              "default": "You are an expert in processing forms. Extracting data from images and documents. Analyze forms line by line to identify field names, data types, and organizational structure. Focus on creating comprehensive blueprints for document processing without extracting actual values.",
              "order": "4"
            },
            "user_prompt": {
              "type": "string",
              "format": "textarea",
              "description": "User prompt template for discovery without ground truth",
              "default": "This image contains forms data. Analyze the form line by line. Image may contains multiple pages, process all the pages. Form may contain multiple name value pair in one line. Extract all the names in the form including the name value pair which doesn't have value. Organize them into groups, extract field_name, data_type and field description. Field_name should be less than 60 characters, should not have space use '-' instead of space. field_description is a brief description of the field and the location of the field like box number or line number in the form and section of the form. Field_name should be unique within the group. Add two fields document_class and document_description. For document_class generate a short name based on the document content like W4, I-9, Paystub. For document_description generate a description about the document in less than 50 words. Group the fields based on the section they are grouped in the form. Group should have attributeType as \"group\". If the group repeats, add an additional field groupType and set the value as \"Table\". Do not extract the values. Return the extracted data in JSON format.",
              "order": "5"
            }
          }
        },
        "with_ground_truth": {
          "order": "1",
          "type": "object",
          "sectionLabel": "Discovery With Ground Truth",
          "description": "Configuration for discovering document classes using reference data",
          "properties": {
            "model_id": {
              "type": "string",
              "description": "Bedrock model ID for discovery with ground truth",
              "enum": [
                "us.amazon.nova-lite-v1:0",
                "us.amazon.nova-pro-v1:0",
                "us.amazon.nova-premier-v1:0",
                "us.anthropic.claude-3-haiku-20240307-v1:0",
                "us.anthropic.claude-3-5-sonnet-20241022-v2:0",
                "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
                "us.anthropic.claude-sonnet-4-20250514-v1:0",
                "us.anthropic.claude-sonnet-4-20250514-v1:0:1m",
                "us.anthropic.claude-opus-4-20250514-v1:0",
                "us.anthropic.claude-opus-4-1-20250805-v1:0"
              ],
              "default": "us.amazon.nova-pro-v1:0",
              "order": "0"
            },
            "temperature": {
              "type": "number",
              "description": "Temperature parameter for model creativity (0.0-1.0)",
              "minimum": 0.0,
              "maximum": 1.0,
              "default": 1.0,
              "order": "1"
            },
            "top_p": {
              "type": "number",
              "description": "Top-p parameter for nucleus sampling (0.0-1.0)",
              "minimum": 0.0,
              "maximum": 1.0,
              "default": 0.1,
              "order": "2"
            },
            "max_tokens": {
              "type": "number",
              "description": "Maximum number of tokens to generate",
              "minimum": 1000,
              "maximum": 20000,
              "default": 10000,
              "order": "3"
            },
            "system_prompt": {
              "type": "string",
              "format": "textarea",
              "description": "System prompt for the discovery model with ground truth",
              "default": "You are an expert in processing forms. Extracting data from images and documents. Use provided ground truth data as reference to optimize field extraction and ensure consistency with expected document structure and field definitions.",
              "order": "4"
            },
            "user_prompt": {
              "type": "string",
              "format": "textarea",
              "description": "User prompt template for discovery with ground truth (use {ground_truth_json} placeholder)",
              "default": "This image contains unstructured data. Analyze the data line by line using the provided ground truth as reference. <GROUND_TRUTH_REFERENCE>{ground_truth_json}</GROUND_TRUTH_REFERENCE> Ground truth reference JSON has the fields we are interested in extracting from the document/image. Use the ground truth to optimize field extraction. Match field names, data types, and groupings from the reference. Image may contain multiple pages, process all pages. Extract all field names including those without values. Do not change the group name and field name from ground truth in the extracted data json. Add field_description field for every field which will contain instruction to LLM to extract the field data from the image/document. Add data_type field for every field. Add two fields document_class and document_description. For document_class generate a short name based on the document content like W4, I-9, Paystub. For document_description generate a description about the document in less than 50 words. If the group repeats and follows table format, add a special field group_type with value \"Table\" and description field for the group. Do not extract the values.",
              "order": "5"
            }
          }
        },
        "output_format": {
          "order": "2",
          "type": "object",
          "sectionLabel": "Output Format Configuration",
          "description": "Configuration for discovery output format",
          "properties": {
            "sample_json": {
              "type": "string",
              "format": "textarea",
              "description": "Sample JSON format for discovery output",
              "default": "{\n  \"document_class\": \"Form-1040\",\n  \"document_description\": \"Brief summary of the document\",\n  \"groups\": [\n    {\n      \"name\": \"PersonalInformation\",\n      \"description\": \"Personal information of Tax payer\",\n      \"attributeType\": \"group\",\n      \"groupType\": \"normal\",\n      \"groupAttributes\": [\n        {\n          \"name\": \"FirstName\",\n          \"dataType\": \"string\",\n          \"description\": \"First Name of Taxpayer\"\n        },\n        {\n          \"name\": \"Age\",\n          \"dataType\": \"number\",\n          \"description\": \"Age of Taxpayer\"\n        }\n      ]\n    }\n  ]\n}",
              "order": "0"
            }
          }
        }
      }
    },
    "pricing": {
      "type": "array",
      "listLabel": "Services",
      "itemLabel": "Service/API",
      "columns": "2",
      "sectionLabel": "Pricing Estimates - check https://aws.amazon.com/bedrock/pricing/",
      "order": "7",
      "items": {
        "type": "object",
        "required": [
          "name",
          "units"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Service/API"
          },
          "units": {
            "type": "array",
            "listLabel": "Metered unit pricing",
            "itemLabel": "Metered Unit price",
            "items": {
              "type": "object",
              "required": [
                "name",
                "price"
              ],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Metered unit name"
                },
                "price": {
                  "type": "number",
                  "description": "Estimated cost/unit"
                }
              }
            }
          }
        }
      }
    }
  }
}
